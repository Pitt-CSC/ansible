---
- name: Create site directory
  action: file path=/u/sites/hackpitt state=directory owner=hackpitt group=hackpitt

- name: Configure nginx site
  action: copy src=hackpitt.pittcsc.org dest=/etc/nginx/sites-available/hackpitt.pittcsc.org
  notify: Restart nginx

- name: Enable nginx site
  action: file path=/etc/nginx/sites-enabled/hackpitt.pittcsc.org src=/etc/nginx/sites-available/hackpitt.pittcsc.org state=link force=yes
  notify: Restart nginx

- name: Allow HTTP traffic
  action: ufw direction=in proto=tcp port=80 rule=allow
  notify: Reload ufw
